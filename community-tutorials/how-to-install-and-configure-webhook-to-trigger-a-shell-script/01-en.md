---
title: How to install and configure a webook to trigger a shell script
description: This tutorial describes how to install a webhook from adnanh. Webhook is a service written in go which wil expose a lightweight webserver. If you call a specific route on the webserver you can execute a command or a shell script on your server.
updated_at: 2021-11-06
slug: how-to-install-and-configure-webhook-to-trigger-a-shell-script
author_name: Patrick Weber
author_url: -
author_image: https://anx.io/0WL19
author_bio: Muster
tags: debian, ubuntu
netcup_product_url: https://www.netcup.de/vserver/vps.php
language: en
available_languages: en
---

# Introduction
This tutotiral is about how to install and configure a webhook from adnanh to trigger a shell script.
In the shell script you can start a deployment or some other actions.

# Requirements
First you need the package manager apt. You need also an editor, for example vi or nano, to create and change config files.

# Step 1 - Updatating your packages and install webhook from adnanh
```
sudo apt-get update && sudo apt-get -y upgrade
sudo apt-get install webhook
```

Then check the version: ```webhook -version```

# Step 2 - Create the webhook-configuration file
Create the webhook-configuration file with an editor: ```nano /etc/webhook.conf```

Paste the webhook-configuration:
```
[
   {
      "id": "deploy-webhook",
      "execute-command": "/var/app/webhook-entrypoint.sh",
      "command-working-directory": "/var/app",
      "include-command-output-in-response": true,
      "include-command-output-in-response-on-error": true,
   }
]
```
Save the configuration file.

We defined only one webhook in an array in the json-config-file. Here we are using the execute-command property to define the shell-script-path. In the command-working-directory the base path is defined.
Later in this tutorial we will execute our webhook with a http request.
With the property "include-command-output-in-response" webhook will include the stdoutput of the shellscript to the http response body. With the property "include-command-output-in-response-on-error" webhook include the erroutput of the shellscript to the http response body. The http-request will wait until the full output is collected. If the exit-code of the shell-script is zero, the status-code of a http-request is 200. If the exit-code is not zero, the status-code is not 200.
You have the option to remove the two "include-*" properties, then you will not see the output of the shellscript in the http-response body. For security reasons, its recommended to not include the output in the http-response-body.

# Step 3 - Create the app-directory
Create the app directory: ```mkdir -p /var/app```

# Step 4 - Create the webhook-entrypoint.sh and make it executeable
Create the file ```/var/app/webhook-entrypoint.sh``` with the content:

```
#!/bin/bash

echo 'Execute webhook-entrypoint.sh-script. Here you can do for example a deployment.'
```

Make the file executeable
```chmod +x `/var/app/webhook-entrypoint.sh```

# Step 4 - Restart webhook-service to activate all changes
IMPORTANT: If you make changes on your webhook-configuration, you must restart the webhook-service to activate all changes.

```service webhook restart```

# Step 5 - Test your webhook with a curl command
From the same server you can test your webhook with the hostname localhost:
```curl http://localhost:9000/hooks/deploy-webhook```

From a different server or your local computer you can test it with your server-ip-address:
```curl http://<server-ip-address>:9000/hooks/deploy-webhook```

# Conclusion
You learned how to install and configure webhook from adnanh. With the webhook you can start a deployment on your server with a simple curl-command from a different server or pc.

# License
MIT

# Contributor's Certificate of Origin
Contributor's Certificate of Origin By making a contribution to this project, I certify that:

 1) The contribution was created in whole or in part by me and I have the right to submit it under the license indicated in the file; or

 2) The contribution is based upon previous work that, to the best of my knowledge, is covered under an appropriate license and I have the right under that license to submit that work with modifications, whether created in whole or in part by me, under the same license (unless I am permitted to submit under a different license), as indicated in the file; or

 3) The contribution was provided directly to me by some other person who certified (a), (b) or (c) and I have not modified it.

 4) I understand and agree that this project and the contribution are public and that a record of the contribution (including all personal information I submit with it, including my sign-off) is maintained indefinitely and may be redistributed consistent with this project or the license(s) involved.

Signed-off-by: Patrick Weber weber.patrick@me.com
