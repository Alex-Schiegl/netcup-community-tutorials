---
title: How to install PostgreSQL and pgAdmin with docker and connect pgAdmin with PostgreSQL
description: This tutorial describes how to install a PostgreSQL database and pgAdmin. pgAdmin is a web based administration tool for the PostgreSQL database. 
updated_at: 2021-11-07
slug: how-to-install-postgres-and-pgadmin-with-docker-and-connect-pgadmin-with-postgres
author_name: Patrick Weber
author_url: -
author_image: -
author_bio: -
tags: debian, ubuntu
netcup_product_url: https://www.netcup.de/vserver/vps.php
language: en
available_languages: en
---

# Introduction
This tutorial is about how to install PostgreSQL and pgAdmin with docker and connect pgAdmin with PostgreSQL.

# Requirements
First you need a virtual server with debian or ubuntu from netcup. This tutorial requires also the setup of docker and docker-compose. On the netcup-community-tutorials you find another tutorial how to setup docker and docker-compose on ubuntu.

# Step 1 - First check your docker and docker-compose version
Check the docker version: ```docker -v```
Output should look like this, maybe with another version: ```Docker version 20.10.10, build b485636```

Check the docker-compose version: ```docker-compose version```
Output should look like this, maybe with another version: ```Docker Compose version v2.1.0```

# Step 4 - Create a compose.yaml file, with PostgreSQL and pgAdmin
Create the file compose.yaml file with nano: ```nano ./compose.yaml```

```
services:
  db:
    image: postgres:14.0
    container_name: db
    restart: always
    ports:
      - 5432:5432
    environment:
      - POSTGRES_PASSWORD=postgres
      - POSTGRES_USER=postgres
    volumes:
      - db_volume:/var/lib/postgresql
    networks:
      backend_network:
  pgadmin:
    image: dpage/pgadmin4:6.1
    container_name: pgadmin
    restart: always
    environment:
      - PGADMIN_DEFAULT_EMAIL=admin@your-netcup-domain.net
      - PGADMIN_DEFAULT_PASSWORD=secret
      - PGADMIN_LISTEN_PORT=8080
    ports:
      - "8080:8080"
    volumes:
      - pgadmin_volume:/var/lib/pgadmin
    networks:
      backend_network:
volumes:
  db_volume:
  pgadmin_volume:

networks:
  backend_network:
```

Save the compose.yaml file.

Here are two services defined: One for PostgreSQL and one for pgAdmin. Both services have a fix container-name and both have its own volume. In the environments-definition you can see the credentials to access the services. The postgres servuce will be exposed on port 5432 to the outside. pgadmin will be exposed on port 8080 to the outside. Both services are using the same docker network "backend_network", which is also defined in the networks-definition.

# Step 5 - Start all docker services
To start all docker services run: ```docker-compose up -d```
With the Parameter "-d" all services will start in detach-mode. That means that all services runs in the background without blocking the command-line.

# Step 6 - Checking status of docker containers
Check the status of the docker containers with the command: ```docker ps -a```
The output should look like this:

```
CONTAINER ID   IMAGE                             COMMAND                  CREATED         STATUS                     PORTS                                                        NAMES
5b9a82c2d403   postgres:14.0                     "docker-entrypoint.sâ€¦"   2 minutes ago   Up 2 minutes               0.0.0.0:5432->5432/tcp, :::5432->5432/tcp                    db
37c02d5fb68c   dpage/pgadmin4:6.1                "/entrypoint.sh"         2 minutes ago   Up 2 minutes               80/tcp, 443/tcp, 0.0.0.0:8080->8080/tcp, :::8080->8080/tcp   pgadmin
```

In this case the both services are running, both have the status "Up 2 minutes".

# Step 7 - Check logs of the containers
First check the logs of the postgres database container: ```docker logs db```

The log should look like:
```
2021-11-07 21:21:06.225 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
2021-11-07 21:21:06.225 UTC [1] LOG:  listening on IPv6 address "::", port 5432
2021-11-07 21:21:06.230 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
2021-11-07 21:21:06.236 UTC [62] LOG:  database system was shut down at 2021-11-07 21:21:06 UTC
2021-11-07 21:21:06.243 UTC [1] LOG:  database system is ready to accept connections
```

Then check the logs of the pgadmin container: ```docker logs pgadmin```
The log should look like:
```
[2021-11-07 21:21:35 +0000] [1] [INFO] Starting gunicorn 20.1.0
[2021-11-07 21:21:35 +0000] [1] [INFO] Listening at: http://[::]:8080 (1)
[2021-11-07 21:21:35 +0000] [1] [INFO] Using worker: gthread
[2021-11-07 21:21:35 +0000] [88] [INFO] Booting worker with pid: 88
```

# Step 8 - Open pgadmin in your browser
Open the url ```http://localhost:8080/``` in the browser.
Login with the credentials:
```
Username: admin@your-netcup-domain.net
Password: secret
```

After your successfull login you see on the left side a "Servers"-entry. Click right click on "Servers", then you see a dropdown. In the dropdown click on the "Create > Server" entry. Enter the values:
```
Name: postgres
```
Then click on the next tab: Connection and enter the value:
```
Hostname/address: db
Port: 5432
Username: postgres
Password: postgres
```

Now click on "Save" to create the server connection from the ui to the database.
On the leftside you see one entry postgres in the servers list.
The server connection will open automatically and you can see on the first page live-statistics of the running postgres database. For example server sessions. If you click on the left side on "postgres > Databases (1) > postgres > Schemas > public" you can see the default schema "public", which will be automatically created, on the first setup.

# Step 9 - Stop and remove all services
If you don't need the PostgreSQL database and pgAdmin anymore, you can stop and remove the two services with one command.
Run ```docker-compose down``` in the command-line.

# Conclusion
You learned how to install PostgreSQL and pgAdmin with docker and connect pgAdmin with PostgreSQL.
PgAdmin makes it easy to administrate the database with a webbased ui. You only need a browser for administration. For your local development that is quiet helpful.

# License
MIT

# Contributor's Certificate of Origin
Contributor's Certificate of Origin By making a contribution to this project, I certify that:

 1) The contribution was created in whole or in part by me and I have the right to submit it under the license indicated in the file; or

 2) The contribution is based upon previous work that, to the best of my knowledge, is covered under an appropriate license and I have the right under that license to submit that work with modifications, whether created in whole or in part by me, under the same license (unless I am permitted to submit under a different license), as indicated in the file; or

 3) The contribution was provided directly to me by some other person who certified (a), (b) or (c) and I have not modified it.

 4) I understand and agree that this project and the contribution are public and that a record of the contribution (including all personal information I submit with it, including my sign-off) is maintained indefinitely and may be redistributed consistent with this project or the license(s) involved.

Signed-off-by: Patrick Weber netcup_wiki@icloud.com
